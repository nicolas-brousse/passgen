#!/usr/bin/env sh

# passgen [type] [length]
#
# type:
# - human (?)
# - decent
# - strong
# - hard

set -e

usage() {
    local binfile=`basename $0`
    echo "$binfile [type] [length]"
}

notify() {
    echo "> Generate '$1' password with $2 characters"
    echo ""
}

genpasswd() {
    local length=$1
    local strings=$2
    [ "$length" == "" ] && length=16
    [ "$strings" == "" ] && strings=A-Za-z0-9_-
    LC_CTYPE=C tr -dc ${strings} < /dev/urandom | head -c ${length} | xargs

    echo ""
}

decent() {
    local length=$1
    [ "$length" == "" ] && length=10
    notify ${FUNCNAME[0]} $length
    genpasswd ${length} 'A-Za-z0-9'
}

strong() {
    local length=$1
    [ "$length" == "" ] && length=15
    notify ${FUNCNAME[0]} $length
    genpasswd ${length} 'A-Za-z0-9_-+='
}

hard() {
    local length=$1
    [ "$length" == "" ] && length=40
    notify ${FUNCNAME[0]} $length
    genpasswd ${length} 'A-Za-z0-9_\!\@\#\$\%\^\&\*\(\)\{\}\[\]\;\~<>-+='
}

if [ "$1" == "" ]; then
    usage;
fi

eval $1 $2
